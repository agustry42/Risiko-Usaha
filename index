<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program Pembelajaran Risiko Usaha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .risk-card {
            transition: all 0.3s ease;
        }
        .risk-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="bg-indigo-600 p-2 rounded-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <h1 class="ml-3 text-xl font-bold text-gray-900">Pembelajaran Risiko Usaha</h1>
                </div>
                <div class="flex space-x-4">
                    <button onclick="showPage(1)" id="nav-1" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors bg-indigo-600 text-white">Materi</button>
                    <button onclick="showPage(2)" id="nav-2" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-600 hover:text-indigo-600">Studi Kasus</button>
                    <button onclick="showPage(3)" id="nav-3" class="nav-btn px-4 py-2 rounded-lg font-medium transition-colors text-gray-600 hover:text-indigo-600">Latihan</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
            <div class="flex items-center justify-between text-sm text-gray-600 mb-2">
                <span>Progress Pembelajaran</span>
                <span id="progress-text">33%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progress-bar" class="progress-bar bg-indigo-600 h-2 rounded-full" style="width: 33%"></div>
            </div>
        </div>
    </div>

    <!-- Page 1: Materi -->
    <div id="page-1" class="page-content fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Risiko Usaha</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">Memahami berbagai jenis risiko dalam dunia bisnis dan cara mengelolanya untuk kesuksesan jangka panjang</p>
            </div>

            <!-- Hero Illustration -->
            <div class="bg-white rounded-2xl shadow-xl p-8 mb-12">
                <div class="flex flex-col lg:flex-row items-center">
                    <div class="lg:w-1/2 mb-8 lg:mb-0">
                        <svg class="w-full h-64" viewBox="0 0 400 300" fill="none">
                            <!-- Background -->
                            <rect width="400" height="300" fill="#f8fafc"/>
                            <!-- Business building -->
                            <rect x="150" y="100" width="100" height="120" fill="#3b82f6" rx="5"/>
                            <rect x="160" y="110" width="15" height="15" fill="#60a5fa"/>
                            <rect x="180" y="110" width="15" height="15" fill="#60a5fa"/>
                            <rect x="200" y="110" width="15" height="15" fill="#60a5fa"/>
                            <rect x="220" y="110" width="15" height="15" fill="#60a5fa"/>
                            <rect x="160" y="130" width="15" height="15" fill="#60a5fa"/>
                            <rect x="180" y="130" width="15" height="15" fill="#60a5fa"/>
                            <rect x="200" y="130" width="15" height="15" fill="#60a5fa"/>
                            <rect x="220" y="130" width="15" height="15" fill="#60a5fa"/>
                            <!-- Risk symbols around building -->
                            <circle cx="100" cy="80" r="25" fill="#ef4444" opacity="0.8"/>
                            <text x="100" y="85" text-anchor="middle" fill="white" font-size="20">âš ï¸</text>
                            <circle cx="320" cy="120" r="25" fill="#f59e0b" opacity="0.8"/>
                            <text x="320" y="125" text-anchor="middle" fill="white" font-size="20">ğŸ“‰</text>
                            <circle cx="80" cy="180" r="25" fill="#ef4444" opacity="0.8"/>
                            <text x="80" y="185" text-anchor="middle" fill="white" font-size="20">ğŸ”¥</text>
                            <circle cx="340" cy="200" r="25" fill="#8b5cf6" opacity="0.8"/>
                            <text x="340" y="205" text-anchor="middle" fill="white" font-size="20">ğŸ’°</text>
                            <!-- Shield protection -->
                            <path d="M200 250 L180 240 L180 220 L200 210 L220 220 L220 240 Z" fill="#10b981" opacity="0.9"/>
                            <text x="200" y="235" text-anchor="middle" fill="white" font-size="16">ğŸ›¡ï¸</text>
                        </svg>
                    </div>
                    <div class="lg:w-1/2 lg:pl-8">
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">Apa itu Risiko Usaha?</h3>
                        <p class="text-gray-600 mb-6">Risiko usaha adalah kemungkinan terjadinya kerugian atau hasil yang tidak diinginkan dalam menjalankan kegiatan bisnis. Setiap usaha pasti memiliki risiko, namun dengan pemahaman yang baik, risiko dapat dikelola dan diminimalkan.</p>
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <p class="text-indigo-800 font-medium">ğŸ’¡ Ingat: Risiko bukan untuk dihindari, tetapi untuk dikelola dengan bijak!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Types of Business Risks -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">ğŸ’°</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Keuangan</h3>
                    <p class="text-gray-600 mb-4">Risiko yang berkaitan dengan kondisi keuangan perusahaan, seperti likuiditas, kredit, dan fluktuasi nilai tukar.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Risiko kredit macet</li>
                        <li>â€¢ Risiko likuiditas</li>
                        <li>â€¢ Risiko nilai tukar</li>
                    </ul>
                </div>

                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">ğŸ“Š</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Pasar</h3>
                    <p class="text-gray-600 mb-4">Risiko yang timbul dari perubahan kondisi pasar yang mempengaruhi permintaan dan penawaran produk.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Perubahan selera konsumen</li>
                        <li>â€¢ Kompetisi ketat</li>
                        <li>â€¢ Fluktuasi harga</li>
                    </ul>
                </div>

                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">âš–ï¸</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Hukum</h3>
                    <p class="text-gray-600 mb-4">Risiko yang berkaitan dengan perubahan regulasi, kebijakan pemerintah, dan aspek legal lainnya.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Perubahan regulasi</li>
                        <li>â€¢ Sengketa hukum</li>
                        <li>â€¢ Pelanggaran kontrak</li>
                    </ul>
                </div>

                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">âš¡</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Operasional</h3>
                    <p class="text-gray-600 mb-4">Risiko yang timbul dari proses internal, sistem, atau faktor eksternal yang mengganggu operasi bisnis.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Kerusakan peralatan</li>
                        <li>â€¢ Kesalahan manusia</li>
                        <li>â€¢ Gangguan sistem IT</li>
                    </ul>
                </div>

                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">ğŸŒ</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Lingkungan</h3>
                    <p class="text-gray-600 mb-4">Risiko yang berkaitan dengan faktor lingkungan dan bencana alam yang dapat mempengaruhi bisnis.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Bencana alam</li>
                        <li>â€¢ Perubahan iklim</li>
                        <li>â€¢ Polusi lingkungan</li>
                    </ul>
                </div>

                <div class="risk-card bg-white rounded-xl shadow-lg p-6">
                    <div class="text-4xl mb-4">ğŸ”’</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Risiko Keamanan</h3>
                    <p class="text-gray-600 mb-4">Risiko yang berkaitan dengan keamanan data, cyber security, dan keamanan fisik perusahaan.</p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>â€¢ Cyber attack</li>
                        <li>â€¢ Pencurian data</li>
                        <li>â€¢ Keamanan fisik</li>
                    </ul>
                </div>
            </div>

            <!-- Risk Management Process -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">Proses Manajemen Risiko</h3>
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">ğŸ”</span>
                        </div>
                        <h4 class="font-bold text-gray-900 mb-2">1. Identifikasi</h4>
                        <p class="text-sm text-gray-600">Mengenali dan mengidentifikasi berbagai risiko yang mungkin terjadi</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">ğŸ“</span>
                        </div>
                        <h4 class="font-bold text-gray-900 mb-2">2. Penilaian</h4>
                        <p class="text-sm text-gray-600">Mengukur probabilitas dan dampak dari setiap risiko</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">ğŸ›¡ï¸</span>
                        </div>
                        <h4 class="font-bold text-gray-900 mb-2">3. Mitigasi</h4>
                        <p class="text-sm text-gray-600">Mengembangkan strategi untuk mengurangi atau mengelola risiko</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">ğŸ“Š</span>
                        </div>
                        <h4 class="font-bold text-gray-900 mb-2">4. Monitor</h4>
                        <p class="text-sm text-gray-600">Memantau dan mengevaluasi efektivitas pengelolaan risiko</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Studi Kasus -->
    <div id="page-2" class="page-content hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Studi Kasus Risiko Usaha</h2>
                <p class="text-xl text-gray-600">Pelajari dari pengalaman nyata bagaimana risiko usaha dapat terjadi dan cara mengatasinya</p>
            </div>

            <!-- Case Study 1 -->
            <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                <div class="flex items-start mb-6">
                    <div class="bg-red-100 p-3 rounded-lg mr-4">
                        <span class="text-2xl">ğŸª</span>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Kasus 1: Toko Kelontong "Berkah Jaya"</h3>
                        <p class="text-gray-600">Risiko Pasar dan Operasional</p>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ“– Situasi</h4>
                        <p class="text-gray-600 mb-4">Pak Budi memiliki toko kelontong "Berkah Jaya" yang sudah berjalan 10 tahun. Toko ini menjadi satu-satunya toko di desa tersebut. Namun, pada tahun 2023, sebuah minimarket waralaba besar membuka cabang di dekat tokonya.</p>
                        
                        <h4 class="font-bold text-gray-900 mb-3">âš ï¸ Risiko yang Terjadi</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>â€¢ <strong>Risiko Pasar:</strong> Kehilangan pelanggan karena kompetisi</li>
                            <li>â€¢ <strong>Risiko Operasional:</strong> Penurunan omzet hingga 60%</li>
                            <li>â€¢ <strong>Risiko Keuangan:</strong> Kesulitan membayar supplier</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ’¡ Solusi yang Diterapkan</h4>
                        <ul class="text-gray-600 space-y-2 mb-4">
                            <li>â€¢ Fokus pada produk lokal dan segar</li>
                            <li>â€¢ Memberikan layanan antar gratis</li>
                            <li>â€¢ Menjual produk yang tidak ada di minimarket</li>
                            <li>â€¢ Membangun hubungan personal dengan pelanggan</li>
                        </ul>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-bold text-green-800 mb-2">ğŸ“ˆ Hasil</h4>
                            <p class="text-green-700">Setelah 6 bulan menerapkan strategi baru, omzet kembali normal dan bahkan meningkat 20% dari sebelumnya.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Case Study 2 -->
            <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                <div class="flex items-start mb-6">
                    <div class="bg-blue-100 p-3 rounded-lg mr-4">
                        <span class="text-2xl">ğŸ•</span>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Kasus 2: Restoran "Pizza Corner"</h3>
                        <p class="text-gray-600">Risiko Lingkungan dan Keuangan</p>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ“– Situasi</h4>
                        <p class="text-gray-600 mb-4">Restoran "Pizza Corner" milik Ibu Sarah mengalami dampak pandemi COVID-19. Pemerintah menerapkan PPKM yang membatasi operasional restoran hanya untuk takeaway dan delivery.</p>
                        
                        <h4 class="font-bold text-gray-900 mb-3">âš ï¸ Risiko yang Terjadi</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>â€¢ <strong>Risiko Lingkungan:</strong> Pandemi global</li>
                            <li>â€¢ <strong>Risiko Hukum:</strong> Pembatasan operasional</li>
                            <li>â€¢ <strong>Risiko Keuangan:</strong> Penurunan pendapatan 80%</li>
                            <li>â€¢ <strong>Risiko Operasional:</strong> Harus merumahkan karyawan</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ’¡ Solusi yang Diterapkan</h4>
                        <ul class="text-gray-600 space-y-2 mb-4">
                            <li>â€¢ Pivot ke model bisnis delivery dan takeaway</li>
                            <li>â€¢ Bermitra dengan platform online food delivery</li>
                            <li>â€¢ Mengembangkan menu frozen food</li>
                            <li>â€¢ Memanfaatkan media sosial untuk promosi</li>
                            <li>â€¢ Mengajukan bantuan pemerintah untuk UMKM</li>
                        </ul>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-bold text-green-800 mb-2">ğŸ“ˆ Hasil</h4>
                            <p class="text-green-700">Berhasil mempertahankan bisnis dan bahkan membuka cabang baru dengan fokus pada delivery dan frozen food.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Case Study 3 -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-start mb-6">
                    <div class="bg-purple-100 p-3 rounded-lg mr-4">
                        <span class="text-2xl">ğŸ‘—</span>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Kasus 3: Online Shop "Fashion Kekinian"</h3>
                        <p class="text-gray-600">Risiko Keamanan dan Operasional</p>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ“– Situasi</h4>
                        <p class="text-gray-600 mb-4">Andi menjalankan online shop fashion dengan omzet 50 juta per bulan. Suatu hari, akun Instagram dan WhatsApp bisnisnya di-hack, dan pelanggan menerima pesan penipuan mengatasnamakan tokonya.</p>
                        
                        <h4 class="font-bold text-gray-900 mb-3">âš ï¸ Risiko yang Terjadi</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>â€¢ <strong>Risiko Keamanan:</strong> Akun bisnis di-hack</li>
                            <li>â€¢ <strong>Risiko Reputasi:</strong> Kepercayaan pelanggan menurun</li>
                            <li>â€¢ <strong>Risiko Operasional:</strong> Kehilangan akses ke platform utama</li>
                            <li>â€¢ <strong>Risiko Keuangan:</strong> Penurunan penjualan 70%</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-gray-900 mb-3">ğŸ’¡ Solusi yang Diterapkan</h4>
                        <ul class="text-gray-600 space-y-2 mb-4">
                            <li>â€¢ Segera membuat pengumuman di semua platform</li>
                            <li>â€¢ Menghubungi pelanggan satu per satu untuk klarifikasi</li>
                            <li>â€¢ Membuat website e-commerce sendiri</li>
                            <li>â€¢ Menerapkan two-factor authentication</li>
                            <li>â€¢ Diversifikasi platform penjualan</li>
                        </ul>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-bold text-green-800 mb-2">ğŸ“ˆ Hasil</h4>
                            <p class="text-green-700">Dalam 3 bulan berhasil memulihkan kepercayaan pelanggan dan omzet kembali normal dengan sistem keamanan yang lebih baik.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Learnings -->
            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl shadow-xl p-8 text-white mt-8">
                <h3 class="text-2xl font-bold mb-6 text-center">ğŸ¯ Pelajaran Penting</h3>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center">
                        <div class="text-4xl mb-3">ğŸ”„</div>
                        <h4 class="font-bold mb-2">Adaptasi</h4>
                        <p class="text-indigo-100">Kemampuan beradaptasi dengan perubahan adalah kunci bertahan dalam bisnis</p>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl mb-3">ğŸ›¡ï¸</div>
                        <h4 class="font-bold mb-2">Preparasi</h4>
                        <p class="text-indigo-100">Persiapan dan rencana cadangan sangat penting untuk menghadapi risiko</p>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl mb-3">ğŸ¤</div>
                        <h4 class="font-bold mb-2">Relasi</h4>
                        <p class="text-indigo-100">Hubungan baik dengan pelanggan dan stakeholder membantu dalam krisis</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 3: Latihan Soal -->
    <div id="page-3" class="page-content hidden">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Latihan Soal HOTS</h2>
                <p class="text-xl text-gray-600">Uji kemampuan analisis dan evaluasi Anda tentang risiko usaha dengan 15 soal tingkat tinggi</p>
            </div>

            <!-- Quiz Container -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <!-- Student Info Form (Shown first) -->
                <div id="student-form">
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">ğŸ‘¨â€ğŸ“</div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">Identitas Siswa</h3>
                        <p class="text-gray-600">Silakan lengkapi identitas Anda sebelum memulai latihan soal</p>
                    </div>
                    
                    <form id="student-data-form" class="max-w-md mx-auto space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap *</label>
                            <input type="text" id="student-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Masukkan nama lengkap">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                            <input type="text" id="student-class" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Contoh: XII IPA 1">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">NIS (Opsional)</label>
                            <input type="text" id="student-nis" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Nomor Induk Siswa">
                        </div>
                        
                        <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors">
                            ğŸš€ Mulai Latihan Soal
                        </button>
                    </form>
                </div>

                <!-- Quiz Progress Section (Hidden initially) -->
                <div id="quiz-section" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center">
                            <span class="text-lg font-medium text-gray-600">Soal</span>
                            <span id="question-number" class="ml-2 text-lg font-bold text-indigo-600">1</span>
                            <span class="text-lg font-medium text-gray-600">dari 15</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-lg font-medium text-gray-600 mr-2">Skor:</span>
                            <span id="score" class="text-lg font-bold text-green-600">0</span>
                        </div>
                    </div>

                    <!-- Progress Bar for Quiz -->
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-8">
                        <div id="quiz-progress" class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: 6.67%"></div>
                    </div>

                    <!-- Question Container -->
                    <div id="question-container">
                        <h3 id="question-text" class="text-xl font-bold text-gray-900 mb-6"></h3>
                        <div id="options-container" class="space-y-3">
                            <!-- Options will be inserted here -->
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between mt-8">
                        <button id="prev-btn" onclick="previousQuestion()" class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition-colors disabled:opacity-50" disabled>
                            â† Sebelumnya
                        </button>
                        <button id="next-btn" onclick="nextQuestion()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50" disabled>
                            Selanjutnya â†’
                        </button>
                    </div>
                </div>

                <!-- Results Container (Hidden initially) -->
                <div id="results-container" class="hidden">
                    <div class="text-center">
                        <div class="text-6xl mb-4">ğŸ‰</div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">Latihan Selesai!</h3>
                        
                        <!-- Student Info Display -->
                        <div class="bg-gray-50 rounded-lg p-4 mb-6 text-left max-w-md mx-auto">
                            <h4 class="font-bold text-gray-900 mb-2">Data Siswa:</h4>
                            <p class="text-gray-700"><strong>Nama:</strong> <span id="display-name"></span></p>
                            <p class="text-gray-700"><strong>Kelas:</strong> <span id="display-class"></span></p>
                            <p class="text-gray-700"><strong>NIS:</strong> <span id="display-nis"></span></p>
                        </div>
                        
                        <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-lg p-6 mb-6">
                            <p class="text-xl mb-2">Skor Akhir Anda:</p>
                            <p id="final-score" class="text-4xl font-bold">0/15</p>
                            <p id="percentage" class="text-lg mt-2">0%</p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <p class="text-green-800 font-medium">Jawaban Benar</p>
                                <p id="correct-answers" class="text-2xl font-bold text-green-600">0</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <p class="text-red-800 font-medium">Jawaban Salah</p>
                                <p id="wrong-answers" class="text-2xl font-bold text-red-600">0</p>
                            </div>
                        </div>
                        
                        <div id="save-status" class="mb-4"></div>
                        
                        <button onclick="restartQuiz()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors">
                            ğŸ”„ Ulangi Latihan
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8">
                <!-- School Info -->
                <div>
                    <div class="flex items-center mb-4">
                        <div class="bg-indigo-600 p-2 rounded-lg mr-3">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold">SMK PK PASIM Plus</h3>
                            <p class="text-gray-300 text-sm">Kota Sukabumi</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm mb-2">Program Pembelajaran Digital</p>
                    <p class="text-gray-300 text-sm">Kreatif, Inovasi, dan Kewirausahaan</p>
                </div>

                <!-- Teacher Info -->
                <div>
                    <h4 class="font-bold text-white mb-3">ğŸ‘¨â€ğŸ« Pengajar</h4>
                    <p class="text-gray-300 text-sm mb-2">Agus Tryanto, M.Pd</p>
                    <p class="text-gray-400 text-xs">Guru Mata Pelajaran</p>
                    <p class="text-gray-400 text-xs">Kreatif, Inovasi, dan Kewirausahaan</p>
                </div>

                <!-- Links -->
                <div>
                    <h4 class="font-bold text-white mb-3">ğŸ”— Tautan</h4>
                    <div class="space-y-2">
                        <a href="https://pasimcreativeschool.com/" target="_blank" rel="noopener noreferrer" class="flex items-center text-gray-300 hover:text-white transition-colors text-sm">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.559-.499-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.559.499.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.497-.623.737-1.182.389-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 13.97 6.118 12.546 6.03 11H4.083a6.004 6.004 0 002.783 4.118z" clip-rule="evenodd"></path>
                            </svg>
                            Website Sekolah
                        </a>
                        <a href="https://www.instagram.com/smkpasim.official/" target="_blank" rel="noopener noreferrer" class="flex items-center text-gray-300 hover:text-white transition-colors text-sm">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987c6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.611-3.132-1.551c-.684-.94-.684-2.126 0-3.066c.684-.94 1.835-1.551 3.132-1.551s2.448.611 3.132 1.551c.684.94.684 2.126 0 3.066c-.684.94-1.835 1.551-3.132 1.551zm7.718 0c-1.297 0-2.448-.611-3.132-1.551c-.684-.94-.684-2.126 0-3.066c.684-.94 1.835-1.551 3.132-1.551s2.448.611 3.132 1.551c.684.94.684 2.126 0 3.066c-.684.94-1.835 1.551-3.132 1.551z"/>
                            </svg>
                            Instagram Sekolah
                        </a>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="border-t border-gray-700 mt-8 pt-6 text-center">
                <p class="text-gray-400 text-sm">
                    Â© 2025 SMK PK PASIM Plus Kota Sukabumi. All rights reserved.
                </p>
                <p class="text-gray-500 text-xs mt-1">
                    Dikembangkan untuk pembelajaran digital yang inovatif dan kreatif
                </p>
            </div>
        </div>
    </footer>

    <script>
        // HOTS Question Bank (Higher Order Thinking Skills)
        const questionBank = [
            {
                question: "Sebuah perusahaan teknologi startup mengalami penurunan pendanaan dari investor sebesar 70% akibat resesi ekonomi global. Berdasarkan analisis situasi ini, strategi manajemen risiko yang paling tepat adalah:",
                options: [
                    "Segera menutup perusahaan untuk menghindari kerugian lebih besar",
                    "Melakukan pivot model bisnis, mengurangi burn rate, dan mencari sumber pendanaan alternatif",
                    "Mempertahankan semua karyawan dan berharap kondisi ekonomi membaik",
                    "Menaikkan harga produk untuk mengkompensasi penurunan pendanaan"
                ],
                correct: 1
            },
            {
                question: "Analisis kasus: Restoran chain dengan 50 cabang menghadapi krisis reputasi setelah kasus keracunan makanan di salah satu cabang. Media sosial dipenuhi review negatif dan penjualan turun 60%. Evaluasi strategi crisis management yang paling efektif:",
                options: [
                    "Mengabaikan isu dan fokus pada promosi produk baru",
                    "Menutup sementara semua cabang, melakukan audit keamanan pangan menyeluruh, komunikasi transparan dengan publik, dan implementasi sistem keamanan pangan yang lebih ketat",
                    "Hanya menutup cabang yang bermasalah dan mengganti nama brand",
                    "Menyalahkan supplier dan memindahkan tanggung jawab"
                ],
                correct: 1
            },
            {
                question: "Perusahaan manufaktur otomotif harus mengevaluasi risiko supply chain ketika 80% komponen utama berasal dari satu negara yang sedang mengalami konflik politik. Analisis dampak dan solusi terbaik:",
                options: [
                    "Menunggu konflik selesai sambil mengurangi produksi",
                    "Segera diversifikasi supplier ke multiple negara, membangun strategic inventory, dan mengembangkan supplier lokal meskipun biaya awal tinggi",
                    "Menaikkan harga produk untuk mengantisipasi kenaikan biaya komponen",
                    "Beralih ke produk yang tidak memerlukan komponen dari negara tersebut"
                ],
                correct: 1
            },
            {
                question: "Sebuah fintech lending menghadapi peningkatan NPL (Non-Performing Loan) dari 3% menjadi 15% dalam 6 bulan terakhir. Berdasarkan data ini, evaluasi strategi risk mitigation yang paling komprehensif:",
                options: [
                    "Menghentikan semua pinjaman baru sampai NPL turun",
                    "Merevisi model credit scoring, memperkuat proses due diligence, diversifikasi portfolio berdasarkan segmen risiko, dan meningkatkan collection strategy",
                    "Menaikkan suku bunga untuk semua nasabah baru",
                    "Fokus hanya pada nasabah dengan credit score tertinggi"
                ],
                correct: 1
            },
            {
                question: "Analisis skenario: E-commerce fashion mengalami cyber attack yang mengakibatkan kebocoran data 100,000 pelanggan. Dampak immediate: website down 48 jam, kehilangan kepercayaan konsumen, dan potensi denda regulasi. Prioritas penanganan yang paling strategis:",
                options: [
                    "Fokus memperbaiki website secepat mungkin tanpa memberitahu pelanggan",
                    "Segera notifikasi transparan ke pelanggan, koordinasi dengan otoritas cyber security, implementasi security upgrade, dan menyiapkan compensation plan",
                    "Menyalahkan vendor IT dan menuntut ganti rugi",
                    "Menutup sementara bisnis sampai masalah selesai"
                ],
                correct: 1
            },
            {
                question: "Perusahaan real estate komersial memiliki 70% aset berupa gedung perkantoran di CBD. Tren remote working post-pandemic menyebabkan occupancy rate turun dari 95% ke 60%. Evaluasi strategi adaptasi jangka panjang:",
                options: [
                    "Menurunkan harga sewa untuk menarik penyewa baru",
                    "Melakukan asset transformation menjadi mixed-use (co-working, retail, residential), diversifikasi ke sektor properti lain, dan mengembangkan smart building technology",
                    "Menjual semua aset dan beralih ke bisnis lain",
                    "Menunggu tren remote working berakhir"
                ],
                correct: 1
            },
            {
                question: "Startup agritech dengan teknologi IoT untuk monitoring pertanian menghadapi kompetisi dari perusahaan multinasional dengan budget R&D 100x lebih besar. Analisis competitive strategy yang sustainable:",
                options: [
                    "Bersaing langsung dengan menurunkan harga produk",
                    "Fokus pada niche market spesifik (small-scale farmers), membangun ecosystem partnership dengan koperasi tani, dan mengembangkan local customization yang sulit ditiru",
                    "Menjual perusahaan ke kompetitor besar",
                    "Meniru semua fitur produk kompetitor"
                ],
                correct: 1
            },
            {
                question: "Perusahaan farmasi sedang mengembangkan obat baru dengan investasi R&D $50 juta. Pada fase trial III, ditemukan efek samping yang memerlukan modifikasi formula. Evaluasi decision framework yang optimal:",
                options: [
                    "Melanjutkan trial dengan formula existing untuk menghemat biaya",
                    "Melakukan cost-benefit analysis komprehensif: biaya modifikasi vs potensi revenue vs risiko regulasi, kemudian memutuskan berdasarkan NPV dan risk-adjusted return",
                    "Segera menghentikan proyek untuk menghindari kerugian lebih besar",
                    "Mencari partner untuk berbagi biaya dan risiko"
                ],
                correct: 1
            },
            {
                question: "Analisis kasus kompleks: Perusahaan logistik internasional menghadapi multiple risks: fluktuasi harga BBM (+40%), regulasi emisi karbon baru, dan disruption teknologi autonomous vehicles. Prioritas strategic response:",
                options: [
                    "Fokus mengatasi satu risiko terbesar terlebih dahulu",
                    "Mengembangkan integrated risk management: hedging BBM, investasi fleet elektrik, pilot program autonomous vehicles, dan diversifikasi ke green logistics services",
                    "Menaikkan tarif untuk mengkompensasi semua risiko",
                    "Mengurangi operasi internasional dan fokus domestik"
                ],
                correct: 1
            },
            {
                question: "Perusahaan media digital mengalami penurunan ad revenue 50% karena perubahan algoritma platform media sosial utama. 80% traffic berasal dari platform tersebut. Evaluasi strategi diversifikasi yang paling robust:",
                options: [
                    "Negosiasi dengan platform untuk mendapatkan treatment khusus",
                    "Membangun owned media channels, diversifikasi traffic sources, mengembangkan subscription model, dan menciptakan direct relationship dengan audience",
                    "Pindah ke platform media sosial lain yang sejenis",
                    "Fokus pada content yang sesuai algoritma baru"
                ],
                correct: 1
            },
            {
                question: "Sebuah bank regional menghadapi digital disruption dari fintech dan neobank. Customer acquisition cost naik 200% sementara customer lifetime value turun 30%. Analisis transformation strategy:",
                options: [
                    "Menurunkan biaya operasional dengan mengurangi cabang fisik",
                    "Melakukan digital transformation komprehensif: API banking, partnership dengan fintech, personalized digital services, dan hybrid physical-digital experience",
                    "Fokus pada nasabah senior yang kurang tech-savvy",
                    "Akuisisi fintech competitor untuk mengurangi persaingan"
                ],
                correct: 1
            },
            {
                question: "Perusahaan fashion fast-fashion menghadapi tekanan ESG (Environmental, Social, Governance) dari investor dan konsumen. Biaya compliance sustainability naik 25%, tapi brand value meningkat. Evaluasi strategic trade-off:",
                options: [
                    "Mengabaikan tekanan ESG untuk fokus pada profitability",
                    "Mengintegrasikan sustainability sebagai core business strategy: sustainable supply chain, circular economy model, transparent reporting, dan premium positioning",
                    "Melakukan greenwashing untuk memenuhi ekspektasi tanpa perubahan substansial",
                    "Menjual ke pasar yang kurang peduli sustainability"
                ],
                correct: 1
            },
            {
                question: "Startup EdTech mengalami user churn rate 60% setelah pandemi berakhir dan sekolah offline dibuka kembali. Analisis product-market fit dan pivot strategy:",
                options: [
                    "Menurunkan harga untuk mempertahankan user",
                    "Melakukan user research mendalam, pivot ke hybrid learning solutions, fokus pada skill-based learning, dan mengembangkan B2B2C model dengan institusi pendidikan",
                    "Menambah fitur gamifikasi untuk meningkatkan engagement",
                    "Beralih ke pasar internasional yang masih online learning"
                ],
                correct: 1
            },
            {
                question: "Perusahaan energi terbarukan menghadapi volatilitas harga listrik dan subsidi pemerintah yang tidak pasti. ROI proyek turun dari 15% ke 8%. Evaluasi risk-adjusted investment strategy:",
                options: [
                    "Menunda semua proyek baru sampai kebijakan pemerintah jelas",
                    "Mengembangkan portfolio diversifikasi (solar, wind, hydro), long-term PPA contracts, energy storage solutions, dan hedging instruments untuk stabilisasi revenue",
                    "Fokus hanya pada proyek dengan subsidi pemerintah tertinggi",
                    "Beralih ke investasi energi konvensional yang lebih stabil"
                ],
                correct: 1
            },
            {
                question: "Analisis integrated risk: Perusahaan multinasional consumer goods menghadisi simultaneous challenges: supply chain disruption (COVID), inflation 8%, currency devaluation 20% di emerging markets (40% revenue), dan changing consumer behavior ke sustainable products. Framework prioritas penanganan:",
                options: [
                    "Menangani masalah satu per satu berdasarkan urgency",
                    "Mengembangkan holistic response strategy: supply chain resilience dengan multiple sourcing, dynamic pricing strategy, natural hedging currency exposure, dan accelerated sustainable product development dengan premium positioning",
                    "Fokus pada market yang paling profitable dan stabil",
                    "Mengurangi exposure ke emerging markets dan fokus developed markets"
                ],
                correct: 1
            }
        ];

        // Quiz state
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let quizStartTime = null;
        let studentData = {};

        // Page navigation
        function showPage(pageNum) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(`page-${pageNum}`).classList.remove('hidden');
            document.getElementById(`page-${pageNum}`).classList.add('fade-in');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('text-gray-600');
            });
            document.getElementById(`nav-${pageNum}`).classList.add('bg-indigo-600', 'text-white');
            document.getElementById(`nav-${pageNum}`).classList.remove('text-gray-600');
            
            // Update progress
            const progress = pageNum * 33.33;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progress)}%`;
            
            // Initialize quiz if on page 3
            if (pageNum === 3) {
                resetToStudentForm();
            }
        }

        function resetToStudentForm() {
            // Show student form, hide quiz and results
            document.getElementById('student-form').classList.remove('hidden');
            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('results-container').classList.add('hidden');
            
            // Reset form
            document.getElementById('student-data-form').reset();
            
            // Remove existing event listener and add new one
            const form = document.getElementById('student-data-form');
            const newForm = form.cloneNode(true);
            form.parentNode.replaceChild(newForm, form);
            document.getElementById('student-data-form').addEventListener('submit', handleStudentFormSubmit);
        }

        function handleStudentFormSubmit(event) {
            event.preventDefault();
            
            // Get student data
            studentData = {
                name: document.getElementById('student-name').value.trim(),
                class: document.getElementById('student-class').value.trim(),
                nis: document.getElementById('student-nis').value.trim() || '-'
            };
            
            // Validate required fields
            if (!studentData.name || !studentData.class) {
                alert('Nama lengkap dan kelas wajib diisi!');
                return;
            }
            
            // Start quiz
            startQuiz();
        }

        function startQuiz() {
            // Hide student form, show quiz
            document.getElementById('student-form').classList.add('hidden');
            document.getElementById('quiz-section').classList.remove('hidden');
            document.getElementById('results-container').classList.add('hidden');
            
            // Initialize quiz with shuffled questions and answers
            currentQuestions = getRandomQuestions(questionBank, 15);
            // Shuffle answer options for each question
            currentQuestions = currentQuestions.map(question => shuffleAnswers(question));
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            quizStartTime = new Date();
            
            document.getElementById('score').textContent = '0';
            displayQuestion();
        }

        function getRandomQuestions(bank, count) {
            const shuffled = [...bank].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function shuffleAnswers(question) {
            // Create a copy of the question to avoid modifying the original
            const shuffledQuestion = { ...question };
            
            // Store the original correct answer text
            const correctAnswerText = question.options[question.correct];
            
            // Create array of options with their original indices
            const optionsWithIndex = question.options.map((option, index) => ({
                text: option,
                originalIndex: index
            }));
            
            // Shuffle the options
            const shuffledOptions = [...optionsWithIndex].sort(() => 0.5 - Math.random());
            
            // Update the question with shuffled options
            shuffledQuestion.options = shuffledOptions.map(item => item.text);
            
            // Find the new index of the correct answer
            shuffledQuestion.correct = shuffledOptions.findIndex(item => 
                item.originalIndex === question.correct
            );
            
            return shuffledQuestion;
        }

        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            document.getElementById('question-number').textContent = currentQuestionIndex + 1;
            document.getElementById('question-text').textContent = question.question;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option-item';
                optionDiv.innerHTML = `
                    <label class="flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-indigo-300 transition-colors">
                        <input type="radio" name="answer" value="${index}" class="mr-3 mt-1 text-indigo-600">
                        <span class="text-gray-700 text-sm leading-relaxed">${option}</span>
                    </label>
                `;
                optionsContainer.appendChild(optionDiv);
            });
            
            // Add event listeners to options
            document.querySelectorAll('input[name="answer"]').forEach(input => {
                input.addEventListener('change', handleAnswerSelect);
            });
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / 15) * 100;
            document.getElementById('quiz-progress').style.width = `${progress}%`;
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').disabled = true;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestionIndex] !== undefined) {
                const savedAnswer = userAnswers[currentQuestionIndex];
                document.querySelector(`input[value="${savedAnswer}"]`).checked = true;
                document.getElementById('next-btn').disabled = false;
            }
        }

        function handleAnswerSelect(event) {
            const selectedAnswer = parseInt(event.target.value);
            userAnswers[currentQuestionIndex] = selectedAnswer;
            document.getElementById('next-btn').disabled = false;
            
            // Visual feedback
            document.querySelectorAll('.option-item label').forEach(label => {
                label.classList.remove('border-indigo-500', 'bg-indigo-50');
            });
            event.target.closest('label').classList.add('border-indigo-500', 'bg-indigo-50');
        }

        function nextQuestion() {
            if (currentQuestionIndex < 14) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === currentQuestions[i].correct) {
                    score++;
                }
            }
            
            // Show results and save to spreadsheet
            showResults();
            saveToSpreadsheet();
        }

        function showResults() {
            // Hide quiz, show results
            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('results-container').classList.remove('hidden');
            
            // Display student info
            document.getElementById('display-name').textContent = studentData.name;
            document.getElementById('display-class').textContent = studentData.class;
            document.getElementById('display-nis').textContent = studentData.nis;
            
            // Display scores
            const percentage = Math.round((score / 15) * 100);
            document.getElementById('final-score').textContent = `${score}/15`;
            document.getElementById('percentage').textContent = `${percentage}%`;
            document.getElementById('correct-answers').textContent = score;
            document.getElementById('wrong-answers').textContent = 15 - score;
        }

        function restartQuiz() {
            resetToStudentForm();
        }

        async function saveToSpreadsheet() {
            const statusDiv = document.getElementById('save-status');
            statusDiv.innerHTML = '<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></div><span class="text-blue-800">Menyimpan data ke spreadsheet...</span></div></div>';
            
            try {
                const quizEndTime = new Date();
                const duration = Math.round((quizEndTime - quizStartTime) / 1000 / 60); // in minutes
                const timestamp = new Date().toLocaleString('id-ID');
                const percentage = Math.round((score / 15) * 100);
                
                // Updated Google Apps Script URL - make sure this is the correct deployment URL
                const scriptUrl = 'https://script.google.com/macros/s/AKfycbwj3gQlmi1nLbym4Zsn1nC96siScd_l4PmXG1FGcoN1HFXZF_umGuq2JLF95CzLuefuGw/exec';
                
                // Prepare data for submission
                const submitData = {
                    timestamp: timestamp,
                    nama: studentData.name,
                    kelas: studentData.class,
                    nis: studentData.nis,
                    skor: score.toString(),
                    persentase: percentage.toString(),
                    durasi: duration.toString(),
                    benar: score.toString(),
                    salah: (15 - score).toString()
                };
                
                console.log('Submitting data:', submitData);
                
                // Method 1: POST with JSON
                try {
                    const response = await fetch(scriptUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(submitData),
                        mode: 'no-cors'
                    });
                    console.log('JSON POST sent');
                } catch (e) {
                    console.log('JSON POST failed:', e);
                }
                
                // Method 2: POST with FormData
                try {
                    const formData = new FormData();
                    Object.keys(submitData).forEach(key => {
                        formData.append(key, submitData[key]);
                    });
                    
                    await fetch(scriptUrl, {
                        method: 'POST',
                        body: formData,
                        mode: 'no-cors'
                    });
                    console.log('FormData POST sent');
                } catch (e) {
                    console.log('FormData POST failed:', e);
                }
                
                // Method 3: GET with URL parameters (most reliable)
                try {
                    const params = new URLSearchParams(submitData);
                    const getUrl = `${scriptUrl}?${params.toString()}`;
                    
                    // Use fetch for GET
                    await fetch(getUrl, {
                        method: 'GET',
                        mode: 'no-cors'
                    });
                    console.log('GET request sent');
                    
                    // Also use image as backup
                    const img = new Image();
                    img.src = getUrl;
                    console.log('Image request sent');
                } catch (e) {
                    console.log('GET request failed:', e);
                }
                
                // Method 4: Form submission to iframe
                try {
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = scriptUrl;
                    form.target = 'data-iframe';
                    form.style.display = 'none';
                    
                    Object.keys(submitData).forEach(key => {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = key;
                        input.value = submitData[key];
                        form.appendChild(input);
                    });
                    
                    // Create iframe if not exists
                    let iframe = document.getElementById('data-iframe');
                    if (!iframe) {
                        iframe = document.createElement('iframe');
                        iframe.id = 'data-iframe';
                        iframe.name = 'data-iframe';
                        iframe.style.display = 'none';
                        document.body.appendChild(iframe);
                    }
                    
                    document.body.appendChild(form);
                    form.submit();
                    setTimeout(() => {
                        if (document.body.contains(form)) {
                            document.body.removeChild(form);
                        }
                    }, 1000);
                    console.log('Form submission sent');
                } catch (e) {
                    console.log('Form submission failed:', e);
                }
                
                // Show success message
                setTimeout(() => {
                    statusDiv.innerHTML = '<div class="bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-center"><svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg><span class="text-green-800 font-medium">âœ… Data telah dikirim ke spreadsheet!</span></div><div class="mt-2 text-sm text-green-700">Data dikirim dengan 4 metode berbeda untuk memastikan tersimpan. Periksa spreadsheet dalam beberapa menit.</div></div>';
                }, 3000);
                
            } catch (error) {
                console.error('Error in saveToSpreadsheet:', error);
                statusDiv.innerHTML = '<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-center"><svg class="w-5 h-5 text-yellow-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><span class="text-yellow-800 font-medium">âš ï¸ Status penyimpanan tidak pasti</span></div><div class="mt-2 text-sm text-yellow-700">Data telah dikirim dengan multiple methods. Jika tidak muncul di spreadsheet, silakan download backup CSV di bawah.</div><button onclick="downloadAsCSV()" class="mt-2 bg-yellow-600 text-white px-4 py-2 rounded text-sm hover:bg-yellow-700">ğŸ“¥ Download Backup CSV</button></div>';
            }
        }
        
        function downloadAsCSV() {
            const quizEndTime = new Date();
            const duration = Math.round((quizEndTime - quizStartTime) / 1000 / 60);
            const timestamp = new Date().toLocaleString('id-ID');
            const percentage = Math.round((score / 15) * 100);
            
            // Create CSV data
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Timestamp,Nama Lengkap,Kelas,NIS,Skor,Persentase,Durasi (menit),Jawaban Benar,Jawaban Salah\n";
            csvContent += `"${timestamp}","${studentData.name}","${studentData.class}","${studentData.nis}",${score},${percentage}%,${duration},${score},${15-score}\n`;
            
            // Add detailed answers
            csvContent += "\nDetail Jawaban:\n";
            csvContent += "No,Soal,Jawaban Siswa,Jawaban Benar,Status\n";
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const question = currentQuestions[i];
                const userAnswer = userAnswers[i] !== undefined ? question.options[userAnswers[i]] : "Tidak dijawab";
                const correctAnswer = question.options[question.correct];
                const status = userAnswers[i] === question.correct ? "Benar" : "Salah";
                
                csvContent += `${i+1},"${question.question.replace(/"/g, '""')}","${userAnswer}","${correctAnswer}","${status}"\n`;
            }
            
            // Download CSV
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `hasil_latihan_risiko_usaha_HOTS_${studentData.name}_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            showPage(1);
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9881a51cb47db5e7',t:'MTc1OTM4MTMxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
